<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Rzwebsys7 by webadmin87</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">RzWebSys7</h1>
      <h2 class="project-tagline">CMS powered by Yii2</h2>
      <a href="https://github.com/webadmin87/rzwebsys7" class="btn">View on GitHub</a>
      <a href="https://github.com/webadmin87/rzwebsys7/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/webadmin87/rzwebsys7/tarball/master" class="btn">Download .tar.gz</a>
      <a href="docs/index.html" class="btn">Class reference</a>
    </section>

    <section class="main-content">
      <h1>
<a id="rzwebsys7---cms-на-основе-yii2" class="anchor" href="#rzwebsys7---cms-%D0%BD%D0%B0-%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%B5-yii2" aria-hidden="true"><span class="octicon octicon-link"></span></a>RzWebSys7 - CMS на основе Yii2</h1>

<p>Предствляет собой платформу для быстрого развертывания интерент проекта. Содержит набор наиболее востребованных модулей.</p>

<h2>
<a id="Структура-системы" class="anchor" href="#%D0%A1%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D0%B0-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B" aria-hidden="true"><span class="octicon octicon-link"></span></a>Структура системы</h2>

<p>1) app - web приложение</p>

<p>2) console - консольное приложение</p>

<p>3) common - ядро системы</p>

<p>4) vendor - сторонние компоненты</p>

<p>5) environments - настройки окружений</p>

<h2>
<a id="Системные-требования" class="anchor" href="#%D0%A1%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D1%8B%D0%B5-%D1%82%D1%80%D0%B5%D0%B1%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F" aria-hidden="true"><span class="octicon octicon-link"></span></a>Системные требования</h2>

<p>1) PHP 5.4</p>

<p>2) Веб сервер Apache 2.2</p>

<p>3) PostgreSql 9.3</p>

<p>4) Composer</p>

<h2>
<a id="Установка" class="anchor" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>Установка</h2>

<p>Предполагается что composer находится в путях поиска вашей командной оболочки. Например, его можно разместить в <strong>/usr/local/bin</strong></p>

<p>Apache настроен таким образом, что DOCUMENT_ROOT для виртуального хоста указывает на папку <strong>app/web</strong> </p>

<p>Для начала неоходимо установть плагин <strong>fxp/composer-asset-plugin:1.0.0</strong> для composer. Для этого выполняем следующую комаду:</p>

<p><code>composer.phar global require "fxp/composer-asset-plugin:1.0.0"</code></p>

<p>После этого можно приступит к установки самой системы:</p>

<p>1) В файлах environments/dev/common/config/main-local.php и environments/prod/common/config/main-local.php
прописываем настройки соединения с базой данных для окружения разработки и продакшена соответственно.</p>

<p>2) Устанавливаем зависимости через composer. В корне системы выполняем команду <code>composer.phar install</code></p>

<p>3) Запускаем скрипт <strong>./init</strong> и выбираем нужное окружение для установки</p>

<p>4) Запускаем <strong>./yii install</strong></p>

<p>5) Наслаждаемся )</p>

<p>Административный раздел находится по адресу <strong>/admin/</strong>. Для входа используйте пароль пользователя <strong>root</strong> указанный при установке. </p>

<h2>
<a id="Модули-входящие-в-состав-системы" class="anchor" href="#%D0%9C%D0%BE%D0%B4%D1%83%D0%BB%D0%B8-%D0%B2%D1%85%D0%BE%D0%B4%D1%8F%D1%89%D0%B8%D0%B5-%D0%B2-%D1%81%D0%BE%D1%81%D1%82%D0%B0%D0%B2-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B" aria-hidden="true"><span class="octicon octicon-link"></span></a>Модули входящие в состав системы</h2>

<h3>
<a id="Главный-модуль" class="anchor" href="#%D0%93%D0%BB%D0%B0%D0%B2%D0%BD%D1%8B%D0%B9-%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D1%8C" aria-hidden="true"><span class="octicon octicon-link"></span></a>Главный модуль</h3>

<p>Предоставляет следующий функционал:</p>

<ol>
<li><p>Текстовые странички с возможностью создание иерархических структур и управлением мета - тегами. Возможность создания дружественных SEO url - адресов произвольной вложенности.
Например: <strong>/articles/php/yii2/</strong></p></li>
<li><p>Меню. Возможность создания любого количества меню, произвольной вложенности.</p></li>
<li><p>Комментарии. Возможность добавления комментариев к любой сущности системы.</p></li>
<li><p>Включаемые области. Текстовые включаемые области с возможностью подключения php сценариев.</p></li>
<li><p>Группы включаемых областей. Объединение включаемых областей в группы с возможностью задания правил отображения на страницах сайта.</p></li>
<li><p>Управление пользователями и правами доступа к сущностям. Возможность разграничить доступ к сущностям в админке для разных групп пользователей.</p></li>
<li><p>Управление подключением шаблонов сайта в зависимости от условий (по url адресу, php выражению и т.п.)</p></li>
<li><p>Генератор карты сайта в html и xml форматах.</p></li>
<li><p>Форма обратной связи с отправкой сообщений на email. </p></li>
</ol>

<h3>
<a id="Модуль-новостей" class="anchor" href="#%D0%9C%D0%BE%D0%B4%D1%83%D0%BB%D1%8C-%D0%BD%D0%BE%D0%B2%D0%BE%D1%81%D1%82%D0%B5%D0%B9" aria-hidden="true"><span class="octicon octicon-link"></span></a>Модуль новостей</h3>

<p>Создание новостных и статейных разделов. Иерархический рубрикатор записей.</p>

<h3>
<a id="Баннерный-модуль" class="anchor" href="#%D0%91%D0%B0%D0%BD%D0%BD%D0%B5%D1%80%D0%BD%D1%8B%D0%B9-%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D1%8C" aria-hidden="true"><span class="octicon octicon-link"></span></a>Баннерный модуль</h3>

<p>Добавление баннеров и их вывод в зависимости от баннерного места. Поддерживаются следующие форматы: jpg, gif, png, swf.</p>

<h3>
<a id="Каталог" class="anchor" href="#%D0%9A%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3" aria-hidden="true"><span class="octicon octicon-link"></span></a>Каталог</h3>

<p>Каталог товаров с иерархической рубрикацией. Возможность интеграции с модулем магазина.</p>

<h3>
<a id="Модуль-магазина" class="anchor" href="#%D0%9C%D0%BE%D0%B4%D1%83%D0%BB%D1%8C-%D0%BC%D0%B0%D0%B3%D0%B0%D0%B7%D0%B8%D0%BD%D0%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>Модуль магазина.</h3>

<p>Компоненты корзины реализованы с помощью ajax и работают без перезагрузки страницы. Возможность создания вариантов доставки и оплаты, настройка статусов заказа. Содержимое заказа сохраняется в админке,
а также отправляется администратору сайта на email.</p>

<h3>
<a id="Гео-модуль" class="anchor" href="#%D0%93%D0%B5%D0%BE-%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D1%8C" aria-hidden="true"><span class="octicon octicon-link"></span></a>Гео модуль</h3>

<p>Содержит данные и компоненты для организации гео - справочника.</p>

<h3>
<a id="Фотогалерея" class="anchor" href="#%D0%A4%D0%BE%D1%82%D0%BE%D0%B3%D0%B0%D0%BB%D0%B5%D1%80%D0%B5%D1%8F" aria-hidden="true"><span class="octicon octicon-link"></span></a>Фотогалерея</h3>

<p>Создание фотогалерей с загрузкой файлов через HTML 5</p>

<h3>
<a id="Модуль-импорта" class="anchor" href="#%D0%9C%D0%BE%D0%B4%D1%83%D0%BB%D1%8C-%D0%B8%D0%BC%D0%BF%D0%BE%D1%80%D1%82%D0%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>Модуль импорта</h3>

<p>Позволяет ипортировать данные из CSV файлы. Есть возможность ручной настройки сопоставления полей файла и импортируемых моделей.</p>

<h2>
<a id="Создание-модулей" class="anchor" href="#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D0%B5%D0%B9" aria-hidden="true"><span class="octicon octicon-link"></span></a>Создание модулей</h2>

<h3>
<a id="Генерация-каркаса-нового-модуля" class="anchor" href="#%D0%93%D0%B5%D0%BD%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D1%8F-%D0%BA%D0%B0%D1%80%D0%BA%D0%B0%D1%81%D0%B0-%D0%BD%D0%BE%D0%B2%D0%BE%D0%B3%D0%BE-%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D1%8F" aria-hidden="true"><span class="octicon octicon-link"></span></a>Генерация каркаса нового модуля</h3>

<p>Осуществляется с помощью системного генератора <strong>App module generator</strong></p>

<h3>
<a id="Подключение-модуля-к-системе" class="anchor" href="#%D0%9F%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D1%8F-%D0%BA-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B5" aria-hidden="true"><span class="octicon octicon-link"></span></a>Подключение модуля к системе</h3>

<p>Для покдлючения модуля к системе необходимо прописать идентификатор модуля в параметре <strong>enabledModules</strong> в файле:</p>

<pre><code>common/config/params.php
</code></pre>

<h3>
<a id="Создание-таблиц-сущностей-новых-модулей" class="anchor" href="#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86-%D1%81%D1%83%D1%89%D0%BD%D0%BE%D1%81%D1%82%D0%B5%D0%B9-%D0%BD%D0%BE%D0%B2%D1%8B%D1%85-%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D0%B5%D0%B9" aria-hidden="true"><span class="octicon octicon-link"></span></a>Создание таблиц сущностей новых модулей.</h3>

<p>Осуществляется с помощью <strong>миграций</strong>. Миграции создаются на базе системных шаблонов.</p>

<p>Примеры (таблица простой сущности, таблица древовидной сущности):</p>

<pre><code>./yii migrate/create --migrationPath=@webapp/modules/module_name/migrations --templateFile=@console/views/migrations/table.php migration_name
</code></pre>

<pre><code>./yii migrate/create --migrationPath=@webapp/modules/module_name/migrations --templateFile=@console/views/migrations/table-tree.php migration_name
</code></pre>

<p>где <strong>module_name</strong> - имя модуля для которого создается миграция, <strong>migration_name</strong> - имя миграции</p>

<p>Пример применения миграций для конкретного модуля:</p>

<pre><code>./yii migrate/up --applyPath=@webapp/modules/module_name/migrations
</code></pre>

<p>Без параметра <strong>applyPath</strong> применение миграций происходит для всех модулей сразу</p>

<h3>
<a id="Создание-моделей" class="anchor" href="#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BC%D0%BE%D0%B4%D0%B5%D0%BB%D0%B5%D0%B9" aria-hidden="true"><span class="octicon octicon-link"></span></a>Создание моделей</h3>

<p>Модели системы должны быть унаследованы от <strong>\common\db\ActiveRecord</strong> или <strong>\common\db\TActiveRecord</strong>
(обычные и древовидные соответственно).</p>

<p>Для каждой модели должен быть создан класс, унаследованный от <strong>\common\db\MetaFields</strong>. В нем должен быть реализован метод возвращающий конфигурацию объектов полей модели.
Поле модели - дополнительная абстракция над атрибутом модели. Класс поля должен быть унаследован от <strong>\common\db\fields\Field</strong>. Данная абстракция необходима для автоматической
генерации интерфейса администрирования.</p>

<p>Примеры кода можно найти в модуле main.</p>

<h3>
<a id="Генерация-crud-сущностей" class="anchor" href="#%D0%93%D0%B5%D0%BD%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D1%8F-crud-%D1%81%D1%83%D1%89%D0%BD%D0%BE%D1%81%D1%82%D0%B5%D0%B9" aria-hidden="true"><span class="octicon octicon-link"></span></a>Генерация CRUD сущностей</h3>

<p>Осуществляется с помощью модуля Gii на основе системных шаблонов. Шаблоны <strong>App CRUD</strong> и <strong>App tree CRUD</strong>
для обычных и древовидных сущностей соответственно.
Базовый класс для контроллеров админки common\controllers\Admin.</p>

<h2>
<a id="Рекомендации" class="anchor" href="#%D0%A0%D0%B5%D0%BA%D0%BE%D0%BC%D0%B5%D0%BD%D0%B4%D0%B0%D1%86%D0%B8%D0%B8" aria-hidden="true"><span class="octicon octicon-link"></span></a>Рекомендации</h2>

<p>Модули ресурсов (AssetBundle) необходимо наследовать от <strong>\common\components\AssetBundle</strong></p>

<h2>
<a id="Генерация-документации" class="anchor" href="#%D0%93%D0%B5%D0%BD%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D1%8F-%D0%B4%D0%BE%D0%BA%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%86%D0%B8%D0%B8" aria-hidden="true"><span class="octicon octicon-link"></span></a>Генерация документации</h2>

<p>Для генерации документации воспользуйтесь следующими командами</p>

<pre><code>vendor/bin/apidoc api app ./docs/app
</code></pre>

<pre><code>vendor/bin/apidoc api common ./docs/common
</code></pre>

<pre><code>vendor/bin/apidoc api console ./docs/console
</code></pre>

<h2>
<a id="Тестирование" class="anchor" href="#%D0%A2%D0%B5%D1%81%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5" aria-hidden="true"><span class="octicon octicon-link"></span></a>Тестирование</h2>

<p>Пример генерации фикстур сущностей по шаблону:</p>

<pre><code>./yii fixture/generate-all --templatePath='@tests/codeception/common/templates/fixtures' --fixtureDataPath='@tests/codeception/common/fixtures/data'
</code></pre>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/webadmin87/rzwebsys7">Rzwebsys7</a> is maintained by <a href="https://github.com/webadmin87">webadmin87</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>

